{"remainingRequest":"/goinfre/nderek/matcha_private/front/node_modules/babel-loader/lib/index.js!/goinfre/nderek/matcha_private/front/node_modules/cache-loader/dist/cjs.js??ref--0-0!/goinfre/nderek/matcha_private/front/node_modules/vue-loader/lib/index.js??vue-loader-options!/goinfre/nderek/matcha_private/front/src/components/ChangePassword.vue?vue&type=script&lang=js&","dependencies":[{"path":"/goinfre/nderek/matcha_private/front/src/components/ChangePassword.vue","mtime":1605306440448},{"path":"/goinfre/nderek/matcha_private/front/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/goinfre/nderek/matcha_private/front/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/goinfre/nderek/matcha_private/front/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/goinfre/nderek/matcha_private/front/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KaW1wb3J0IHsgc3RhdGUgfSBmcm9tICJAL3N0b3JlIjsKZXhwb3J0IGRlZmF1bHQgewogIGRhdGE6IGZ1bmN0aW9uIGRhdGEoKSB7CiAgICByZXR1cm4gewogICAgICBjb2RlOiBudWxsLAogICAgICBuZXdfcGFzc3dvcmQ6IG51bGwsCiAgICAgIG9sZF9wYXNzd29yZDogbnVsbAogICAgfTsKICB9LAogIG1ldGhvZHM6IHsKICAgIHJlc2V0UGFzc3dvcmQ6IGZ1bmN0aW9uIHJlc2V0UGFzc3dvcmQoKSB7CiAgICAgIGlmICh0aGlzLmNvZGUpIHsKICAgICAgICB0aGlzLnJlc2V0UGFzc3dvcmR3aXRoQ29kZSgpOwogICAgICB9IGVsc2UgewogICAgICAgIHRoaXMucmVzZXRQYXNzd29yZHdpdGhQYXNzd29yZCgpOwogICAgICB9CiAgICB9LAogICAgcmVzZXRQYXNzd29yZHdpdGhDb2RlOiBmdW5jdGlvbiByZXNldFBhc3N3b3Jkd2l0aENvZGUoKSB7CiAgICAgIHZhciBfdGhpcyA9IHRoaXM7CgogICAgICB0aGlzLiRodHRwLnB1dCgiIi5jb25jYXQodGhpcy4kYXBpLCAiL3Jlc2V0LXBhc3N3b3JkIiksIHsKICAgICAgICBjb2RlOiB0aGlzLmNvZGUsCiAgICAgICAgbmV3X3Bhc3N3b3JkOiB0aGlzLm5ld19wYXNzd29yZAogICAgICB9KS50aGVuKGZ1bmN0aW9uIChyZXMpIHsKICAgICAgICBfdGhpcy4kYnZUb2FzdC50b2FzdCgiUGFzc3dvcmQgc3VjY2Vzc2Z1bGx5IHJlc2V0IiwgewogICAgICAgICAgdGl0bGU6ICJTdWNjZXNzISIsCiAgICAgICAgICBhdXRvSGlkZURlbGF5OiA1MDAwLAogICAgICAgICAgdG9hc3RlcjogImItdG9hc3Rlci10b3AtY2VudGVyIiwKICAgICAgICAgIHZhcmlhbnQ6ICJpbmZvIiwKICAgICAgICAgIG5vQ2xvc2VCdXR0b246IGZhbHNlCiAgICAgICAgfSk7CgogICAgICAgIHNldFRpbWVvdXQoZnVuY3Rpb24gKCkgewogICAgICAgICAgX3RoaXMuJHJvdXRlci5wdXNoKCIvbG9naW4iKTsKICAgICAgICB9LCAzMDAwKTsKICAgICAgfSkuY2F0Y2goZnVuY3Rpb24gKGVycikgewogICAgICAgIF90aGlzLiRidlRvYXN0LnRvYXN0KCJVbmFibGUgdG8gcmVzZXQgcGFzc3dvcmQuIEVycm9yOiAiICsgZXJyLnJlc3BvbnNlLmRhdGEubWVzc2FnZSwgewogICAgICAgICAgdGl0bGU6ICJFcnJvciEiLAogICAgICAgICAgYXV0b0hpZGVEZWxheTogNTAwMCwKICAgICAgICAgIHRvYXN0ZXI6ICJiLXRvYXN0ZXItdG9wLWNlbnRlciIsCiAgICAgICAgICB2YXJpYW50OiAid2FybmluZyIsCiAgICAgICAgICBub0Nsb3NlQnV0dG9uOiBmYWxzZQogICAgICAgIH0pOwoKICAgICAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uICgpIHsKICAgICAgICAgIF90aGlzLiRyb3V0ZXIucHVzaCgiLyIpOwogICAgICAgIH0sIDMwMDApOwogICAgICB9KTsKICAgIH0sCiAgICByZXNldFBhc3N3b3Jkd2l0aFBhc3N3b3JkOiBmdW5jdGlvbiByZXNldFBhc3N3b3Jkd2l0aFBhc3N3b3JkKCkgewogICAgICB2YXIgX3RoaXMyID0gdGhpczsKCiAgICAgIHRoaXMuJGh0dHAucHV0KCIiLmNvbmNhdCh0aGlzLiRhcGksICIvcmVzZXQtcGFzc3dvcmQiKSwgewogICAgICAgIHByZXZpb3VzX3Bhc3N3b3JkOiB0aGlzLm9sZF9wYXNzd29yZCwKICAgICAgICBuZXdfcGFzc3dvcmQ6IHRoaXMubmV3X3Bhc3N3b3JkLAogICAgICAgIHVzZXJfaWQ6IHN0YXRlLnVzZXIuaWQKICAgICAgfSkudGhlbihmdW5jdGlvbiAocmVzKSB7CiAgICAgICAgX3RoaXMyLm5ld19wYXNzd29yZCA9IG51bGw7CiAgICAgICAgX3RoaXMyLm9sZF9wYXNzd29yZCA9IG51bGw7CgogICAgICAgIF90aGlzMi4kYnZUb2FzdC50b2FzdCgiUGFzc3dvcmQgc3VjY2Vzc2Z1bGx5IGNoYW5nZWQuIiwgewogICAgICAgICAgdGl0bGU6ICJTdWNjZXNzISIsCiAgICAgICAgICBhdXRvSGlkZURlbGF5OiA1MDAwLAogICAgICAgICAgdG9hc3RlcjogImItdG9hc3Rlci10b3AtY2VudGVyIiwKICAgICAgICAgIHZhcmlhbnQ6ICJzdWNjZXNzIiwKICAgICAgICAgIG5vQ2xvc2VCdXR0b246IGZhbHNlCiAgICAgICAgfSk7CiAgICAgIH0pLmNhdGNoKGZ1bmN0aW9uIChlcnIpIHsKICAgICAgICBfdGhpczIuJGJ2VG9hc3QudG9hc3QoIlVuYWJsZSB0byByZXNldCBwYXNzd29yZC4gRXJyb3I6ICIgKyBlcnIucmVzcG9uc2UuZGF0YS5tZXNzYWdlLCB7CiAgICAgICAgICB0aXRsZTogIkVycm9yISIsCiAgICAgICAgICBhdXRvSGlkZURlbGF5OiA1MDAwLAogICAgICAgICAgdG9hc3RlcjogImItdG9hc3Rlci10b3AtY2VudGVyIiwKICAgICAgICAgIHZhcmlhbnQ6ICJ3YXJuaW5nIiwKICAgICAgICAgIG5vQ2xvc2VCdXR0b246IGZhbHNlCiAgICAgICAgfSk7CiAgICAgIH0pOwogICAgfQogIH0sCiAgbW91bnRlZDogZnVuY3Rpb24gbW91bnRlZCgpIHsKICAgIHRoaXMuY29kZSA9IHRoaXMuJHJvdXRlLnF1ZXJ5LmNvZGU7CgogICAgaWYgKCF0aGlzLmNvZGUgJiYgIXN0YXRlLnVzZXIuaWQpIHsKICAgICAgYWxlcnQoIk5vdCBsb2dnZWQgaW4gYW5kIG5vIGNvZGUsIHJlZGlyZWN0IHRvIGxvZ2luPyIpOwogICAgfQogIH0KfTs="},{"version":3,"sources":["ChangePassword.vue"],"names":[],"mappings":"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","sourcesContent":["<template>\n  <div\n    class=\"h-100 d-flex flex-column justify-content-center align-items-center my-5\"\n  >\n    <form @submit.prevent=\"resetPassword\">\n      <div v-if=\"code\">\n        <img src=\"@/assets/logo-plum-and-orange.png\" />\n        <b-input-group>\n          <b-form-input\n            v-model=\"new_password\"\n            type=\"password\"\n            placeholder=\"New password here...\"\n            required\n          ></b-form-input>\n\n          <b-input-group-append>\n            <b-button variant=\"outline-secondary\" type=\"submit\"\n              >Change Password</b-button\n            >\n          </b-input-group-append>\n        </b-input-group>\n      </div>\n      <div v-else>\n        <b-form-input\n          class=\"mb-2\"\n          v-model=\"old_password\"\n          type=\"password\"\n          placeholder=\"Old password here...\"\n          required\n        ></b-form-input>\n        <b-form-input\n          class=\"mb-2\"\n          v-model=\"new_password\"\n          type=\"password\"\n          placeholder=\"New password here...\"\n          required\n        ></b-form-input>\n        <b-button variant=\"outline-secondary\" type=\"submit\"\n          >Change Password</b-button\n        >\n      </div>\n    </form>\n  </div>\n</template>\n\n<script>\n\nimport {state} from \"@/store\"\n\nexport default {\n  data: function() {\n    return {\n      code: null,\n      new_password: null,\n      old_password: null,\n    };\n  },\n  methods: {\n    resetPassword: function() {\n      if (this.code) {\n        this.resetPasswordwithCode();\n      } else {\n        this.resetPasswordwithPassword();\n      }\n    },\n    resetPasswordwithCode: function() {\n      this.$http\n        .put(`${this.$api}/reset-password`, {\n          code: this.code,\n          new_password: this.new_password,\n        })\n        .then((res) => {\n          this.$bvToast.toast(\"Password successfully reset\", {\n            title: \"Success!\",\n            autoHideDelay: 5000,\n            toaster: \"b-toaster-top-center\",\n            variant: \"info\",\n            noCloseButton: false,\n          });\n\n          setTimeout(() => {\n            this.$router.push(\"/login\");\n          }, 3000);\n        })\n        .catch((err) => {\n          this.$bvToast.toast(\n            \"Unable to reset password. Error: \" + err.response.data.message,\n            {\n              title: \"Error!\",\n              autoHideDelay: 5000,\n              toaster: \"b-toaster-top-center\",\n              variant: \"warning\",\n              noCloseButton: false,\n            }\n          );\n\n          setTimeout(() => {\n            this.$router.push(\"/\");\n          }, 3000);\n        });\n    },\n    resetPasswordwithPassword: function() {\n      this.$http\n        .put(`${this.$api}/reset-password`, {\n          previous_password: this.old_password,\n          new_password: this.new_password,\n          user_id: state.user.id,\n        })\n        .then((res) => {\n          this.new_password = null;\n          this.old_password = null;\n          this.$bvToast.toast(\"Password successfully changed.\", {\n            title: \"Success!\",\n            autoHideDelay: 5000,\n            toaster: \"b-toaster-top-center\",\n            variant: \"success\",\n            noCloseButton: false,\n          });\n        })\n        .catch((err) => {\n          this.$bvToast.toast(\n            \"Unable to reset password. Error: \" + err.response.data.message,\n            {\n              title: \"Error!\",\n              autoHideDelay: 5000,\n              toaster: \"b-toaster-top-center\",\n              variant: \"warning\",\n              noCloseButton: false,\n            }\n          );\n        });\n    },\n  },\n  mounted: function() {\n    this.code = this.$route.query.code;\n    if (!this.code && !state.user.id) {\n      alert(\"Not logged in and no code, redirect to login?\");\n    }\n  },\n};\n</script>\n\n<style></style>\n"],"sourceRoot":"src/components"}]}