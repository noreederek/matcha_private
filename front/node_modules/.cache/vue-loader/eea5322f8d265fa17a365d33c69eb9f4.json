{"remainingRequest":"/goinfre/nderek/matcha_private/front/node_modules/vue-loader/lib/index.js??vue-loader-options!/goinfre/nderek/matcha_private/front/src/components/profile-components/Actions.vue?vue&type=script&lang=js&","dependencies":[{"path":"/goinfre/nderek/matcha_private/front/src/components/profile-components/Actions.vue","mtime":1605306440450},{"path":"/goinfre/nderek/matcha_private/front/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/goinfre/nderek/matcha_private/front/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/goinfre/nderek/matcha_private/front/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/goinfre/nderek/matcha_private/front/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCBheGlvcyBmcm9tICdheGlvcycKaW1wb3J0IHthY3Rpb25zLCBzdGF0ZX0gZnJvbSAnQC9zdG9yZScKaW1wb3J0IFJlcG9ydCBmcm9tICdAL2NvbXBvbmVudHMvcHJvZmlsZS1jb21wb25lbnRzL1JlcG9ydCcKaW1wb3J0IFJhdGUgZnJvbSAnQC9jb21wb25lbnRzL3Byb2ZpbGUtY29tcG9uZW50cy9SYXRlJwoKZXhwb3J0IGRlZmF1bHQgewogIHByb3BzOiBbInVzZXIiXSwKICBjb21wb25lbnRzOiB7CiAgICBSZXBvcnQsCiAgICBSYXRlCiAgfSwKICBkYXRhKCkgewogICAgcmV0dXJuIHsKICAgICAgcmVsYXRpb25zaGlwOiBudWxsCiAgICB9CiAgfSwKICBtZXRob2RzOiB7CiAgICBsaWtlVXNlcjogZnVuY3Rpb24gKCkgewogICAgICBheGlvcy5wb3N0KGAke3RoaXMuJGFwaX0vbWF0Y2hlc2AsIHsibWF0Y2hlZV9pZCIgOiB0aGlzLnVzZXIuaWR9KQogICAgICAudGhlbihyZXMgPT4gewogICAgICAgIGFjdGlvbnMubm90aWZ5LmluZm8ocmVzLmRhdGEubWVzc2FnZSkKICAgICAgICB0aGlzLmNoZWNrTWF0Y2goKQogICAgICB9KQogICAgICAuY2F0Y2goZXJyID0+IHsKICAgICAgICBpZiAoZXJyLnJlc3BvbnNlLmRhdGEubm9fcGhvdG8pIHsKICAgICAgICAgIGFjdGlvbnMubm90aWZ5LmVycm9yKGVyci5yZXNwb25zZS5kYXRhLm1lc3NhZ2UpCiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgIGFjdGlvbnMubm90aWZ5LmVycm9yKGVyci5yZXNwb25zZS5kYXRhLm1lc3NhZ2UpCiAgICAgICAgfQogICAgICB9KQogICAgfSwKCiAgICB1bm1hdGNoOiBmdW5jdGlvbiAoKSB7CiAgICAgIGF4aW9zLmRlbGV0ZShgJHt0aGlzLiRhcGl9L3VubWF0Y2gvJHt0aGlzLnVzZXIuaWR9YCkKICAgICAgLnRoZW4ocmVzID0+IHsKICAgICAgICBhY3Rpb25zLm5vdGlmeS53YXJuaW5nKCJVc2VyIHJlbGF0aW9uc2hpcCByZW1vdmVkLiBZb3Ugd2lsbCBubyBsb25nZXIgc2VlIHRoaXMgdXNlciBvbiB0aGUgc2l0ZS4iKQogICAgICAgIHNldFRpbWVvdXQoKCkgPT4gewogICAgICAgICAgdGhpcy4kcm91dGVyLmdvKC0xKQogICAgICAgIH0sIDE1MDApCiAgICAgIH0pCiAgICAgIC5jYXRjaChlcnIgPT4gewogICAgICAgIGFjdGlvbnMubm90aWZ5LmVycm9yKCJDb3VsZCBub3QgcmVtb3ZlIHVzZXIgcmVsYXRpb25zaGlwLiBQbGVhc2UgY29udGFjdCBhbiBhZG1pbi4gIiArIGVycikKICAgICAgfSkKICAgIH0sCgogICAgY2hlY2tNYXRjaDogZnVuY3Rpb24gKCkgewogICAgICBheGlvcy5nZXQoYCR7dGhpcy4kYXBpfS9tYXRjaC8ke3RoaXMudXNlci5pZH1gKQogICAgICAudGhlbihyZXMgPT4gewogICAgICAgIHRoaXMucmVsYXRpb25zaGlwID0gcmVzLmRhdGEKICAgICAgfSkKICAgICAgLmNhdGNoKGVyciA9PiB7CiAgICAgICAgYWN0aW9ucy5ub3RpZnkuZXJyb3IoIlRoZXJlIHdhcyBhIHByb2JsZW0gbG9hZGluZyBzb21lIGRhdGEuIE5vdGljZSBvZiB0aGlzIGVycm9yIGhhcyBiZWVuIHNlbnQgdG8gYWRtaW5zLiIpCiAgICAgIH0pCiAgICB9CiAgfSwKICBjcmVhdGVkOiBmdW5jdGlvbiAoKSB7CiAgICB0aGlzLmNoZWNrTWF0Y2goKQogIH0KfQo="},{"version":3,"sources":["Actions.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA8BA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"Actions.vue","sourceRoot":"src/components/profile-components","sourcesContent":["<template>\n  <div v-if=\"relationship\" class=\"mb-3 p-md-2\">\n    <Report class=\"small mt-1 mb-3\" :user=\"user\"/>\n    <div v-if=\"relationship.matched && relationship.liked\">\n      <b-card class=\"border-none shadow-sm rounded text-dark\" >\n        Things are looking <span class=\"text-secondary\"><strong>HOT</strong></span> in here.<br>You should get chatting.<br><hr>\n        <b-link>Go to chat</b-link><hr>\n        <Rate :user=\"user\" /><hr>\n        <b-link @click=\"unmatch\" class=\"text-danger\">UNMATCH</b-link>\n      </b-card>\n    </div>\n    <div v-else-if=\"!relationship.matched && relationship.liked\">\n      <b-card class=\"border-none shadow-sm rounded text-dark\" >\n        You've already <span class=\"text-secondary\" style=\"font-weight: 700px\"><strong>LIKED</strong></span> this user.<br>Fingers crossed they'll like you back.<br><hr>\n        <b-link @click=\"unmatch\" class=\"text-danger\">UNLIKE</b-link>\n      </b-card>\n    </div>\n    <div v-else-if=\"!relationship.matched && !relationship.liked\">\n      <b-card class=\"border-none shadow-sm rounded text-dark\" >\n        This could be the <span class=\"text-secondary\"><strong>ONE</strong></span>.<br>What are you waiting for?<br><hr>\n        <b-link @click=\"likeUser\" class=\"\">LIKE</b-link>\n      </b-card>\n    </div>\n    <div v-else>\n      Could not determine relationship. Please refresh.\n    </div>\n  </div>\n</template>\n\n<script>\nimport axios from 'axios'\nimport {actions, state} from '@/store'\nimport Report from '@/components/profile-components/Report'\nimport Rate from '@/components/profile-components/Rate'\n\nexport default {\n  props: [\"user\"],\n  components: {\n    Report,\n    Rate\n  },\n  data() {\n    return {\n      relationship: null\n    }\n  },\n  methods: {\n    likeUser: function () {\n      axios.post(`${this.$api}/matches`, {\"matchee_id\" : this.user.id})\n      .then(res => {\n        actions.notify.info(res.data.message)\n        this.checkMatch()\n      })\n      .catch(err => {\n        if (err.response.data.no_photo) {\n          actions.notify.error(err.response.data.message)\n        } else {\n          actions.notify.error(err.response.data.message)\n        }\n      })\n    },\n\n    unmatch: function () {\n      axios.delete(`${this.$api}/unmatch/${this.user.id}`)\n      .then(res => {\n        actions.notify.warning(\"User relationship removed. You will no longer see this user on the site.\")\n        setTimeout(() => {\n          this.$router.go(-1)\n        }, 1500)\n      })\n      .catch(err => {\n        actions.notify.error(\"Could not remove user relationship. Please contact an admin. \" + err)\n      })\n    },\n\n    checkMatch: function () {\n      axios.get(`${this.$api}/match/${this.user.id}`)\n      .then(res => {\n        this.relationship = res.data\n      })\n      .catch(err => {\n        actions.notify.error(\"There was a problem loading some data. Notice of this error has been sent to admins.\")\n      })\n    }\n  },\n  created: function () {\n    this.checkMatch()\n  }\n}\n</script>"]}]}