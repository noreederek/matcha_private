{"remainingRequest":"/goinfre/nderek/matcha_private/front/node_modules/vue-loader/lib/index.js??vue-loader-options!/goinfre/nderek/matcha_private/front/src/components/profile-components/Location.vue?vue&type=script&lang=js&","dependencies":[{"path":"/goinfre/nderek/matcha_private/front/src/components/profile-components/Location.vue","mtime":1605306440451},{"path":"/goinfre/nderek/matcha_private/front/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/goinfre/nderek/matcha_private/front/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/goinfre/nderek/matcha_private/front/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/goinfre/nderek/matcha_private/front/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCgppbXBvcnQge2FjdGlvbnMsIHN0YXRlfSBmcm9tICJAL3N0b3JlIgoKZXhwb3J0IGRlZmF1bHQgewogIHByb3BzOiBbInVzZXIiLCAibXlwcm9maWxlIl0sCiAgZGF0YSgpIHsKICAgIHJldHVybiB7CiAgICAgIHBlcm1pc3Npb25DaGVjazogZmFsc2UsCiAgICAgIHNob3dMb2NhdGlvbjogZmFsc2UsCiAgICAgIGxvY2F0aW9uTmFtZTogJycsCiAgICAgIGxvYWRpbmc6IGZhbHNlLAogICAgICBwb3M6IG51bGwKICAgIH0KICB9LAogIG1ldGhvZHM6IHsKICAgIGNoYW5nZUxvYzogZnVuY3Rpb24gKCkgewogICAgICB0aGlzLnBlcm1pc3Npb25DaGVjayA9IHRydWUgJiYgdGhpcy5teXByb2ZpbGUKICAgICAgaWYgKHRoaXMubXlwcm9maWxlKSB7CiAgICAgICAgdGhpcy5zaG93TG9jYXRpb24gPSBmYWxzZQogICAgICB9CiAgICB9LAoKICAgIHVzZUlQOiBhc3luYyBmdW5jdGlvbiAoKSB7CiAgICAgIHRoaXMucGVybWlzc2lvbkNoZWNrID0gZmFsc2UKICAgICAgdGhpcy5wb3MgPSBhd2FpdCBhY3Rpb25zLmxvY2F0aW9uLmlwKCkKICAgICAgdGhpcy5nZXRMb2NhdGlvbigpCiAgICB9LAogICAgdXNlR1BTOiBhc3luYyBmdW5jdGlvbiAoKSB7CiAgICAgIHRoaXMucGVybWlzc2lvbkNoZWNrID0gZmFsc2UKICAgICAgdGhpcy5wb3MgPSBhd2FpdCBhY3Rpb25zLmxvY2F0aW9uLmJyb3dzZXIoKQogICAgICB0aGlzLmdldExvY2F0aW9uKCkKICAgIH0sCiAgICBnZXRMb2NhdGlvbjogYXN5bmMgZnVuY3Rpb24gKCkgewogICAgICB0aGlzLmxvY2F0aW9uTmFtZSA9IGF3YWl0IGFjdGlvbnMubG9jYXRpb24ubmFtZSh0aGlzLnBvcykKICAgICAgdGhpcy5zaG93TG9jYXRpb24gPSB0cnVlCiAgICAgIHRoaXMubG9hZGluZyA9IGZhbHNlCiAgICAgIHRoaXMudXBkYXRlTG9jYXRpb24oKQogICAgfSwKICAgIHVwZGF0ZUxvY2F0aW9uOiBmdW5jdGlvbiAoKSB7CiAgICAgIHRoaXMudXNlci5sYXRpdHVkZSA9IHRoaXMucG9zLmxhdAogICAgICB0aGlzLnVzZXIubG9uZ2l0dWRlID0gdGhpcy5wb3MubG9uZwogICAgICB0aGlzLiRlbWl0KCJzeW5jIikKICAgICAgcmV0dXJuCiAgICB9CiAgfSwKICBtb3VudGVkOiBhc3luYyBmdW5jdGlvbiAoKSB7CiAgICAKICAgIGlmICghdGhpcy51c2VyLmxhdGl0dWRlIHx8ICF0aGlzLnVzZXIubG9uZ2l0dWRlKSB7CiAgICAgIHRoaXMucGVybWlzc2lvbkNoZWNrID0gdHJ1ZQogICAgfSBlbHNlIHsKICAgICAgc2V0VGltZW91dCgoKSA9PiB7CiAgICAgICAgdGhpcy5wb3MgPSB7bGF0OiB0aGlzLnVzZXIubGF0aXR1ZGUsIGxvbmc6IHRoaXMudXNlci5sb25naXR1ZGV9CiAgICAgICAgdGhpcy5nZXRMb2NhdGlvbigpCiAgICAgIH0sIDEwMCk7CiAgICB9CiAgfQp9Cg=="},{"version":3,"sources":["Location.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;AA4BA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"Location.vue","sourceRoot":"src/components/profile-components","sourcesContent":["<template>\n  <div class=\"mb-4\">\n    <h4 style=\"font-weight: 700\" class=\"my-3\" @click=\"changeLoc\">Location</h4>\n    <div class=\"d-flex flex-row flex-wrap justify-content-center my-2\">\n      <div v-if=\"showLocation\" @click=\"changeLoc\" title=\"Click to update location\">\n        {{ locationName }}\n        <div v-if=\"loading\">\n          <b-spinner variant=\"primary\" label=\"Spinning\"></b-spinner>\n        </div>\n      </div>\n      <div class=\"mx-5\" v-if=\"permissionCheck\">\n        Use GPS for location?\n\n        <div class>\n          <b-button class=\"bg-danger border-danger m-2\" @click=\"useIP()\">No</b-button>\n          <b-button class=\"bg-success border-success m-2\" @click=\"useGPS()\">Yes</b-button>\n        </div>\n\n        <span class=\"small\">If you select \"NO\" the app will try to allocate a location for you.<br>\n        The accuracy of this placement will be low and may affect the match recommendations you receive.</span>\n      </div>\n    </div>\n\n  </div>\n</template>\n\n<script>\n\nimport {actions, state} from \"@/store\"\n\nexport default {\n  props: [\"user\", \"myprofile\"],\n  data() {\n    return {\n      permissionCheck: false,\n      showLocation: false,\n      locationName: '',\n      loading: false,\n      pos: null\n    }\n  },\n  methods: {\n    changeLoc: function () {\n      this.permissionCheck = true && this.myprofile\n      if (this.myprofile) {\n        this.showLocation = false\n      }\n    },\n\n    useIP: async function () {\n      this.permissionCheck = false\n      this.pos = await actions.location.ip()\n      this.getLocation()\n    },\n    useGPS: async function () {\n      this.permissionCheck = false\n      this.pos = await actions.location.browser()\n      this.getLocation()\n    },\n    getLocation: async function () {\n      this.locationName = await actions.location.name(this.pos)\n      this.showLocation = true\n      this.loading = false\n      this.updateLocation()\n    },\n    updateLocation: function () {\n      this.user.latitude = this.pos.lat\n      this.user.longitude = this.pos.long\n      this.$emit(\"sync\")\n      return\n    }\n  },\n  mounted: async function () {\n    \n    if (!this.user.latitude || !this.user.longitude) {\n      this.permissionCheck = true\n    } else {\n      setTimeout(() => {\n        this.pos = {lat: this.user.latitude, long: this.user.longitude}\n        this.getLocation()\n      }, 100);\n    }\n  }\n}\n</script>"]}]}