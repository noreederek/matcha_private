{"remainingRequest":"/goinfre/nderek/matcha_private/front/node_modules/vue-loader/lib/index.js??vue-loader-options!/goinfre/nderek/matcha_private/front/src/components/profile-components/SexualPrefs.vue?vue&type=script&lang=js&","dependencies":[{"path":"/goinfre/nderek/matcha_private/front/src/components/profile-components/SexualPrefs.vue","mtime":1605306440451},{"path":"/goinfre/nderek/matcha_private/front/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/goinfre/nderek/matcha_private/front/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/goinfre/nderek/matcha_private/front/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/goinfre/nderek/matcha_private/front/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCgppbXBvcnQgVm9lcnJvVGFnc0lucHV0IGZyb20gJ0B2b2Vycm8vdnVlLXRhZ3NpbnB1dCc7CgpleHBvcnQgZGVmYXVsdCB7CiAgbmFtZTogIlNleHVhbFByZWZzIiwKICBwcm9wczogWyJ1c2VyIiwgIm15cHJvZmlsZSJdLAogIGNvbXBvbmVudHM6IHsKICAgICJ0YWdzLWlucHV0IiA6IFZvZXJyb1RhZ3NJbnB1dAogIH0sCiAgZGF0YTogZnVuY3Rpb24gKCkgewogICAgcmV0dXJuIHsKICAgICAgYXZhaWxhYmxlVGFncyA6IFtdLAogICAgICBzZWxlY3RlZFRhZ3M6IFtdLAogICAgICB0YWdzRWRpdDogZmFsc2UKICAgIH0KICB9LAogIGNvbXB1dGVkOiB7CiAgICBwcmVmZXJlbmNlczogZnVuY3Rpb24gKCkgewogICAgICBsZXQgcHJlZmVyZW5jZXMgPSBbXQogICAgICB0aGlzLnNlbGVjdGVkVGFncy5mb3JFYWNoKGkgPT4gewogICAgICAgIHByZWZlcmVuY2VzLnB1c2goaS52YWx1ZSkKICAgICAgfSkKICAgICAgcmV0dXJuIHByZWZlcmVuY2VzCiAgICB9CiAgfSwKICBtZXRob2RzOiB7CiAgICB0YWdzT246IGZ1bmN0aW9uICgpIHsKICAgICAgdGhpcy50YWdzRWRpdCA9ICF0aGlzLnRhZ3NFZGl0ICYmIHRoaXMubXlwcm9maWxlCiAgICB9LAogICAgZ2V0R2VuZGVyczogZnVuY3Rpb24gKCkgewogICAgICByZXR1cm4gdGhpcy4kaHR0cC5nZXQoYCR7dGhpcy4kYXBpfS9pbmZvL2dlbmRlcnNgKQogICAgICAudGhlbihyZXMgPT4gewogICAgICAgIHJlcy5kYXRhLmdlbmRlcnMuZm9yRWFjaChnZW5kZXIgPT4gewogICAgICAgICAgbGV0IGtleSA9IGdlbmRlci50b0xvd2VyQ2FzZSgpLnJlcGxhY2UoIiAiLCAiLSIpCiAgICAgICAgICB0aGlzLmF2YWlsYWJsZVRhZ3MucHVzaCh7a2V5OiBrZXksIHZhbHVlOiBnZW5kZXJ9KQogICAgICAgIH0pCiAgICAgIH0pCiAgICAgIC5jYXRjaChlcnIgPT4gewogICAgICAgIGFjdGlvbnMubm90aWZ5LmVycm9yKCJUaGVyZSB3YXMgYSBwcm9ibGVtIGxvYWRpbmcgc29tZSBkYXRhLiBOb3RpY2Ugb2YgdGhpcyBlcnJvciBoYXMgYmVlbiBzZW50IHRvIGFkbWlucy4iKQogICAgICB9KQogICAgfSwKCiAgICBzYXZlUHJlZmVyZW5jZXM6IGZ1bmN0aW9uICgpIHsKICAgICAgdGhpcy4kcHJvcHMudXNlci5wcmVmZXJlbmNlcyA9IHRoaXMucHJlZmVyZW5jZXMKCiAgICAgIHRoaXMuJGVtaXQoInN5bmMiKQogICAgICB0aGlzLiRmb3JjZVVwZGF0ZSgpCiAgICB9CiAgfSwKICBjcmVhdGVkOiBhc3luYyBmdW5jdGlvbiAoKSB7CiAgICBhd2FpdCB0aGlzLmdldEdlbmRlcnMoKQogICAgQXJyYXkuZnJvbSh0aGlzLnVzZXIucHJlZmVyZW5jZXMgfHwgW10pLmZvckVhY2goaSA9PiB7CiAgICAgIHRoaXMuc2VsZWN0ZWRUYWdzLnB1c2goe2tleTogaSwgdmFsdWU6IGl9KQogICAgfSkKICB9Cn0K"},{"version":3,"sources":["SexualPrefs.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;AAuBA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"SexualPrefs.vue","sourceRoot":"src/components/profile-components","sourcesContent":["<template>\n  <div class=\"mb-4\">\n    <h4 style=\"font-weight: 700\" class=\"my-3\" @click=\"tagsOn()\">Sexual Preferences</h4>\n    <div class=\"d-flex flex-row flex-wrap justify-content-center my-2\" @click=\"tagsOn()\" v-if=\"!tagsEdit\">\n      <div v-for=\"(tag, index) in selectedTags\" @click=\"tagsOn()\" :key=\"index\" style=\"background-color: #e05e1b\" class=\"border text-light rounded-pill mx-1 px-3 py-1 my-1\">\n        {{ tag.value }}\n      </div>\n    </div>\n    <tags-input \n      v-if=\"tagsEdit\"\n      element-id=\"tags\"\n      v-model=\"selectedTags\"\n      :typeahead-hide-discard=\"true\"\n      :only-existing-tags=\"true\"\n      :existing-tags=\"availableTags\"\n      :typeahead=\"true\"\n      @tags-updated=\"savePreferences\">\n    </tags-input>\n  </div>\n</template>\n\n<script>\n\nimport VoerroTagsInput from '@voerro/vue-tagsinput';\n\nexport default {\n  name: \"SexualPrefs\",\n  props: [\"user\", \"myprofile\"],\n  components: {\n    \"tags-input\" : VoerroTagsInput\n  },\n  data: function () {\n    return {\n      availableTags : [],\n      selectedTags: [],\n      tagsEdit: false\n    }\n  },\n  computed: {\n    preferences: function () {\n      let preferences = []\n      this.selectedTags.forEach(i => {\n        preferences.push(i.value)\n      })\n      return preferences\n    }\n  },\n  methods: {\n    tagsOn: function () {\n      this.tagsEdit = !this.tagsEdit && this.myprofile\n    },\n    getGenders: function () {\n      return this.$http.get(`${this.$api}/info/genders`)\n      .then(res => {\n        res.data.genders.forEach(gender => {\n          let key = gender.toLowerCase().replace(\" \", \"-\")\n          this.availableTags.push({key: key, value: gender})\n        })\n      })\n      .catch(err => {\n        actions.notify.error(\"There was a problem loading some data. Notice of this error has been sent to admins.\")\n      })\n    },\n\n    savePreferences: function () {\n      this.$props.user.preferences = this.preferences\n\n      this.$emit(\"sync\")\n      this.$forceUpdate()\n    }\n  },\n  created: async function () {\n    await this.getGenders()\n    Array.from(this.user.preferences || []).forEach(i => {\n      this.selectedTags.push({key: i, value: i})\n    })\n  }\n}\n</script>\n\n<style src='@voerro/vue-tagsinput/dist/style.css'></style>\n<style>\n\n</style>"]}]}